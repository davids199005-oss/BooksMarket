{% extends "base.html" %}
{% load static %}

{% block title %}{{ category.title }} â€” Code Nest{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'books_market/css/categories.css' %}">
{% endblock %}

{% block content %}
<nav class="breadcrumb">
    <a href="{% url 'category_list' %}">Categories</a>
    <span class="breadcrumb-sep">/</span>
    <span class="breadcrumb-current">{{ category.title }}</span>
</nav>

<section class="page-head">
    <h1 class="page-title">{{ category.title }}</h1>
    {% if category.description %}
    <p class="page-lead">{{ category.description }}</p>
    {% endif %}
</section>

<div class="books-wrap">
    {% if books %}
    <ul class="book-list">
        {% for book in books %}
        <li>
            <a href="{% url 'book_detail' book.slug %}" class="book-card-link">
                <div class="book-card">
                    {% if book.image %}
                    <div class="book-cover">
                        <img src="{{ book.image.url }}" alt="{{ book.title }}" loading="lazy">
                    </div>
                    {% else %}
                    <div class="book-cover book-cover-placeholder">No cover</div>
                    {% endif %}
                    <div class="book-info">
                        <h2 class="book-title">{{ book.title }}</h2>
                        <p class="book-author">{{ book.author }}</p>
                        {% if book.description %}
                        <p class="book-desc">{{ book.description|truncatewords:25 }}</p>
                        {% endif %}
                    </div>
                </div>
            </a>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p class="empty-msg">No books in this category yet.</p>
    {% endif %}
</div>
{% endblock %}
